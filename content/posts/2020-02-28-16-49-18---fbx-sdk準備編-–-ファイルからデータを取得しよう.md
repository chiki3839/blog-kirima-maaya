---
template: post
title: FBX SDK準備編 – ファイルからデータを取得しよう
socialImage: /media/fbxsdk.png
draft: false
date: 2020-02-28T16:46:30.225Z
description: |-
  今回からFBX SDKを使ってfbxファイルからデータを取得していきます。

  fbxファイルはAutodesk社が管理するもっとも有名な3Dファイル形式の1つです。

  取得するデータとしては頂点インデックス、頂点座標、法線、テクスチャ座標(uv)、ボーンインデックス、ボーンウェイトなどを取得していきます。
category: プログラミング
tags:
  - C / C++
  - CG - Computer Graphics
series: FBX SDKを使ってファイルからデータを取得しよう
seriesNumber: 1
---
今回からFBX SDKを使ってfbxファイルからデータを取得していきます。

fbxファイルはAutodesk社が管理するもっとも有名な3Dファイル形式の1つです。

取得するデータとしては頂点インデックス、頂点座標、法線、テクスチャ座標(uv)、ボーンインデックス、ボーンウェイトなどを取得していきます。

読み込むファイルはここでは僕が作成したモデルを使って説明します。 下のサイトからao_twinte_chan_fbxxxx.zip(xxxはバージョン)をダウンロードして解凍して使ってください。

![](/media/SnapCrab_NoName_2017-12-27_18-4-23_No-00-1320x500.png)

単純な構造にしているので簡単に扱えると思います。

## FBXSDKの設定をする

Visual Studioをインストールしてない方は[こちら](https://codelabo.com/144/)を参考にしてください。

まずは下の公式サイトから「GET FBX SDK」を押してダウンロードページに行き、FBX SDKをダウンロードしてください。

<https://www.autodesk.com/products/fbx/overview>

僕はVisual Studio Community 2017を使っているので、一番近い赤で示したVS2015用のFBX SDKをダウンロードしました。

新しいバージョンのSDKが出ていたら、そちらを使って、これからしていく説明のバージョン部分を読み替えてください。

![](/media/SnapCrab_NoName_2017-12-27_19-44-46_No-00.png)

ダウンロードしたファイルをダブルクリックした後のインストールは特に変更するところがないのでnextを押していればいいです。

新規作成->プロジェクトからWin32コンソールアプリケーションを新規作成します。

ここではプロジェクト名をFbxLoaderSampleとしてます。

![](/media/SnapCrab_NoName_2017-12-26_17-35-56_No-00.jpg)

下の様にプロジェクト->”プロジェクト名”のプロパティと進みます。

![](/media/SnapCrab_NoName_2017-12-27_20-29-21_No-00.png)

左上の構成を「すべての構成」にして、「C/C++」->「全般」と進み、「追加のインクルードディレクトリ」の右にあるボタンを押すと「編集」というのが出てくるので選択します。

![](/media/SnapCrab_NoName_2017-12-27_20-38-24_No-00.png)

ファイルのようなボタンを押して、インクルードディレクトリを指定していきます。

![](/media/SnapCrab_NoName_2017-12-27_20-45-40_No-00-768x582.png)

インストールされたFBX SDKの「include」フォルダを指定します。 デフォルトでは「C:\Program Files\Autodesk\FBX\FBX SDK\2018.1.1\include」となるはずです。

![](/media/SnapCrab_NoName_2017-12-27_20-59-2_No-00-768x511.png)

次に追加のライブラリディレクトリを指定していきます。

構成をアクティブデバッグ(またはデバッグ)にしてください。

リンカー->全般と進み、先ほどと同様にライブラリディレクトリを選択していきます。

![](/media/SnapCrab_NoName_2017-12-27_21-2-40_No-00-768x507.png)

Visual Studio Communityは設定しないと32ビット版のバイナリしか扱えないので、「C:\Program Files\Autodesk\FBX\FBX SDK\2018.1.1\lib\vs2015\x86\debug」を選択します。

（x64を選択したい場合は[こちら](https://qiita.com/imura/items/076196b50f105c3138f7)や[こちら](https://msdn.microsoft.com/ja-jp/library/9yb4317s.aspx)などを参考にして設定を行ってください）

![](/media/SnapCrab_NoName_2017-12-27_23-54-11_No-00-1-768x557.png)

次に「C/C++」->「コード生成」のランタイムライブラリを確認します。 

基本的には「/MDd」となっていると思います。

![](/media/SnapCrab_NoName_2017-12-27_22-17-21_No-00-768x555.png)

「リンカー」->入力の追加の依存ファイルを編集していきます。

![](/media/SnapCrab_NoName_2017-12-27_22-26-19_No-00-768x485.png)

先ほど/MDd(または/MD)となっていたので「libfbxsdk-md.lib」と入力します。

 (/MTdまたは/MTとなっていたら「libfbxsdk-mt.lib」と入力します。)

![](/media/SnapCrab_NoName_2017-12-27_22-30-52_No-00-768x660.png)

これでデバッグ時には使えるようになったので、コードを書いてきちんと設定できているか確かめます。

OKボタンを押してプロパティを閉じてください。

以下のコードを書いて、実行してみましょう(デバッグ開始はF5でできます)。

このとき必ずソリューション構成がDebugになっていることを確認してください。

![](/media/SnapCrab_NoName_2017-12-28_0-17-14_No-00.png)

```cpp
#include "stdafx.h"
#include "fbxsdk.h"

int main()
{
    FbxManager* manager = FbxManager::Create();
    manager->Destroy();	//これを呼んでおけばFBX SDKのメモリ解放忘れはないはずです。
    return 0;
}
```

エラーが出なければ問題ありません(すぐ終了します)。

先ほどはデバッグ構成の設定をしたので、今度はリリース構成の設定をしていきます。

プロパティを開き、構成を「Release」にします。

リンカー->全般の追加のライブラリディレクトリに

![](/media/SnapCrab_NoName_2017-12-28_0-20-50_No-00.png)

デバッグの時と同様に「C:\Program Files\Autodesk\FBX\FBX SDK\2018.1.1\lib\vs2015\x86\release」と設定します。

![](/media/SnapCrab_NoName_2017-12-28_0-26-4_No-00-768x656.png)

「C/C++」->「コード生成」のランタイムライブラリを確認します。

今回は「/MD」となっていましたので、「リンカー」->入力の追加の依存ファイルに「libfbxsdk-md.lib」と入力します。

![](/media/SnapCrab_NoName_2017-12-28_0-30-14_No-00.png)

ソリューション構成をReleaseにして実行してみて、エラーが出なければOKです。

次回からは本格的にデータを取得していこうと思います。
